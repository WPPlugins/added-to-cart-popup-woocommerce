jQuery(document).ready(function(t){function a(a,o){t.ajax({url:xoo_cp_localize.adminurl,type:"POST",data:{action:"xoo_cp_cart_ajax",product_data:o},success:function(o,n,i){a.hasClass(".ajax_add_to_cart")||a.find("span.xoo-cp-atc-icon").html('<i class="fa fa-check" aria-hidden="true"></i>'),i.getResponseHeader("content-type").indexOf("text/html")>=0?t(".xoo-cp-atcn").html(o):(t(".xoo-cp-atcn").html('<div class="xoo-cp-success"><i class="fa fa-check" aria-hidden="true"></i> '+o.pname+" "+s.added+"</div>"),t(".xoo-cp-content").html(o.cp_html),c(o.ajax_fragm)),t(".xoo-cp-opac").show(),t(".xoo-cp-modal").addClass("xoo-cp-active")}})}function c(a){var c=a.fragments;a.cart_hash;c&&t.each(c,function(a){t(a).addClass("updating")}),c&&t.each(c,function(a,c){t(a).replaceWith(c)}),t(".widget_shopping_cart, .updating").stop(!0).css("opacity","1").unblock()}function o(a){t.each(a.target.classList,function(a,c){"xoo-cp-close"!=c&&"xoo-cp-modal"!=c||(t(".xoo-cp-opac").hide(),t(".xoo-cp-modal").removeClass("xoo-cp-active"),t(".xoo-cp-atcn , .xoo-cp-content").html(""))})}function n(a,c,o){return t.ajax({url:xoo_cp_localize.adminurl,type:"POST",data:{action:"xoo_cp_change_ajax",cart_key:a,new_qty:c,pid:o}})}function i(a,o){t(".xoo-cp-outer").show();var i=a.parents(".xoo-cp-pdetails"),p=i.data("cp"),r=p.key,d=p.pname,l=i.find(".xoo-cp-qty");n(r,o).done(function(a,n,i){t(".xoo-cp-outer").hide(),i.getResponseHeader("content-type").indexOf("text/html")>=0?(t(".xoo-cp-atcn").html(a),l.val(e)):(t(".xoo-cp-atcn").html('<div class="xoo-cp-success"><i class="xcp-icon xcp-icon-checkmark"></i> '+d+" "+s.updated+"</div>"),t(".xcp-ptotal").html(a.ptotal),l.val(o),c(a.ajax_fragm))})}var e,s=JSON.parse(xoo_cp_localize.xcp_text);t(document).on("submit","form.cart",function(c){if(c.preventDefault(),0!==(o=t(this).find(".single_add_to_cart_button")).find(".xoo-cp-atc-icon").length?o.find(".xoo-cp-atc-icon").html('<i class="xcp-icon xcp-icon-spinner2"></i><span>'):o.append('<span class="xoo-cp-atc-icon"><i class="xcp-icon xcp-icon-spinner2"></i><span>'),0===o.length)var o=t(this).find("button");var n=parseInt(t(this).find("[name=variation_id]").val()),i=parseInt(t(this).find("[name=add-to-cart]").val()),e=parseInt(t(this).find(".quantity").find(".qty").val()),s={};if(n){var p={};t(this).find(".variations select").each(function(){p[t(this).data("attribute_name")]=t(this).val()}),p=JSON.stringify(p),s.attributes=p,s.variation_id=n}s.product_id=i,s.quantity=e,a(o,JSON.stringify(s))}),xoo_cp_localize.enshop&&t(".add_to_cart_button").on("click",function(c){var o=t(this);if(!o.hasClass("product_type_variable")){c.preventDefault(),0!==o.find(".xoo-cp-atc-icon").length?o.find(".xoo-cp-atc-icon").html('<i class="xcp-icon xcp-icon-spinner2"></i><span>'):o.append('<span class="xoo-cp-atc-icon"><i class="xcp-icon xcp-icon-spinner2"></i><span>');var n=o.data("product_id"),i={};i.product_id=n,i.variation_id=0,i.quantity=1,a(o,i=JSON.stringify(i))}}),t(document).on("click",".xoo-cp-close",o),t(".xoo-cp-modal").on("click",o),t(document).on("focusin",".xoo-cp-qty",function(){e=t(this).val()}),t(document).on("change",".xoo-cp-qty",function(a){var c=t(this),o=parseInt(t(this).val()),n=parseInt(t(this).attr("step")),s=parseInt(t(this).attr("min")),p=parseInt(t(this).attr("max")),r=!1;0!==o?(isNaN(o)||o<0?r=!0:o>p&&p>0?(alert("Maximum Quantity: "+p),r=!0):o<s?r=!0:o%n!=0?(alert("Quantity can only be purchased in multiple of "+n),r=!0):i(c,o),!0===r&&t(this).val(e)):c.parents(".xoo-cp-pdetails").find(".xoo-cp-remove .xcp-icon").trigger("click")}),t(document).on("click",".xcp-chng",function(){var a=t(this),c=a.siblings(".xoo-cp-qty");c.trigger("focusin");var o=parseInt(c.val()),n=parseInt(c.attr("step")),e=parseInt(c.attr("min")),s=parseInt(c.attr("max"));if(a.hasClass("xcp-plus")){if((p=o+n)>s&&s>0)return void alert("Maximum Quantity: "+s)}else if(a.hasClass("xcp-minus")){var p=o-n;if(0===p)return void a.parents(".xoo-cp-pdetails").find(".xoo-cp-remove .xcp-icon").trigger("click");if(p<e)return;if(o<0)return void alert("Invalid")}i(a,p)}),t(document).on("click",".xoo-cp-remove .xcp-icon",function(){t(".xoo-cp-outer").show();var a=t(this).parents(".xoo-cp-pdetails").data("cp"),o=a.key,i=a.pname;n(o,0).done(function(a){t(".xoo-cp-content").html(""),t(".xoo-cp-atcn").html('<div class="xoo-cp-success"><i class="fa fa-check" aria-hidden="true"></i> '+i+" "+s.removed+"</div>"),t(".xoo-cp-outer").hide(),c(a.ajax_fragm)})})});